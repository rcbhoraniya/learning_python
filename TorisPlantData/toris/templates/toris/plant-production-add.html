{% extends "base.html" %}
{% block container %}
{{ form.media }}
{% load crispy_forms_tags %}
<div class="container mt-3">

    <div class="card  border-dark mb-3">
        <h4 class="card-header text-center">Plant Production Add Form</h4>
        <div class="card-body">
            <form method="post" id="plantproductionForm" data-start-reading-url="{% url 'toris:ajax_load_plant' %}"
                  novalidate>
                {% csrf_token %}
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-lg-4">
                            <table>
                                {% for field in form %}
                                {% if forloop.counter <= 3 %}
                                <tr>
                                    <td>{{ field |as_crispy_field }}</td>
                                </tr>
                                {% endif %}
                                {% endfor %}
                            </table>
                        </div>
                        <div class="col-lg-4">
                            <table>
                                {% for field in form %}
                                {% if forloop.counter > 3 %}
                                {% if forloop.counter <= 6 %}
                                <tr>
                                    <td>{{field|as_crispy_field}}</td>
                                </tr>
                                {% endif %}
                                {% endif %}
                                {% endfor %}
                            </table>
                        </div>
                        <div class="col-lg-4">
                            <table>
                                {% for field in form %}
                                {% if forloop.counter > 6 %}
                                <tr>
                                    <td>{{field|as_crispy_field}}</td>
                                </tr>
                                {% endif %}
                                {% endfor %}
                            </table>
                        </div>
                    </div>
                </div>
                <div class="text-center">
                    <input type="submit" class='btn btn-success ' value="Submit">
                    <a class="btn btn-primary" href="{% url 'toris:production_list'  %}">Back</a>
                </div>
            </form>
        </div>
    </div>
</div>


<script>
    $("#id_plant").change(function () {
      var url = $("#plantproductionForm").attr("data-start-reading-url");  // get the url of the `load_cities` view
      var plantId = $(this).val();  // get the selected country ID from the HTML input
        console.log(plantId)
      $.ajax({                       // initialize an AJAX request
        url: url,                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
        data: {
          'plant': plantId       // add the country id to the GET parameters
        },
        success: function (data) {   // `data` is the return of the `load_cities` view function

          $("#id_start_reading").attr("value", data);  // replace the contents of the city input with the data that came from the server
            console.log(data)
        }
      });

    });



</script>

{% endblock %}